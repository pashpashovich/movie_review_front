<div class="container my-5">
  <h1 class="text-center mb-4">üé¨ –ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤</h1>

  <div class="card p-4 shadow-lg rounded mb-4">
    <form [formGroup]="filterForm">
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">üìå –ù–∞–∑–≤–∞–Ω–∏–µ</label>
          <input type="text" formControlName="searchQuery" class="form-control shadow-sm" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ">
        </div>
        <div class="col-md-3">
          <label class="form-label">üé≠ –ñ–∞–Ω—Ä</label>
          <select formControlName="genre" class="form-select shadow-sm">
            <option value="">–í—Å–µ –∂–∞–Ω—Ä—ã</option>
            <option *ngFor="let g of genres" [value]="g.id">{{ g.name }}</option>
          </select>
        </div>
        <div class="col-md-3">
          <label class="form-label">üåç –Ø–∑—ã–∫</label>
          <select formControlName="language" class="form-select shadow-sm">
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫</option>
            <option value="–†—É—Å—Å–∫–∏–π">–†—É—Å—Å–∫–∏–π</option>
            <option value="–ê–Ω–≥–ª–∏–π—Å–∫–∏–π">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</option>
            <option value="–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π">–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π</option>
            <option value="–ò—Å–ø–∞–Ω—Å–∫–∏–π">–ò—Å–ø–∞–Ω—Å–∫–∏–π</option>
            <option value="–ë–µ–ª–æ—Ä—É—Å—Å–∫–∏–π">–ë–µ–ª–æ—Ä—É—Å—Å–∫–∏–π</option>
          </select>
        </div>
      </div>
      <div class="row g-3 mt-3">
        <div class="col-md-3">
          <label class="form-label">üìÖ –ì–æ–¥</label>
          <input type="number" formControlName="year" class="form-control shadow-sm" placeholder="2023">
        </div>
        <div class="col-md-3">
          <label class="form-label">‚è≥ –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω)</label>
          <input type="number" formControlName="duration" class="form-control shadow-sm" placeholder="–º–∏–Ω—É—Ç—ã">
        </div>
        <div class="col-md-3 align-self-end">
          <button type="button" class="btn btn-primary w-100 shadow-sm" (click)="applyFilters()">üîç –ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
        </div>
        <div class="col-md-3 align-self-end">
          <button type="button" class="btn btn-outline-secondary w-100 shadow-sm" (click)="resetFilters()">‚ùå –°–±—Ä–æ—Å–∏—Ç—å</button>
        </div>
      </div>
    </form>
  </div>

  <div class="row mb-4">
    <div class="col-md-12">
      <h3>üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h3>
      <div *ngIf="recommendations.length === 0" class="alert alert-info text-center">
        üöÄ –ù–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
      </div>
      <div *ngIf="recommendations.length > 0" class="row row-cols-1 row-cols-md-3 g-4">
        <div *ngFor="let rec of recommendations" class="col">
          <div class="card h-100 shadow-sm rounded">
            <img [src]="rec.posterUrl" class="card-img-top" alt="{{ rec.title }}">
            <div class="card-body">
              <h5 class="card-title">{{ rec.title }}</h5>
              <a [routerLink]="['/user/movies', rec.id]" class="btn btn-outline-primary w-100">‚ÑπÔ∏è –ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <h3>üé• –§–∏–ª—å–º—ã</h3>
      <div *ngIf="movies.length === 0" class="alert alert-warning text-center">
        <strong>üö´ –ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤</strong>
      </div>
      <div *ngIf="movies.length > 0" class="row row-cols-1 row-cols-md-3 g-4">
        <div *ngFor="let movie of movies" class="col">
          <div class="card h-100 shadow-sm rounded">
            <img [src]="movie.posterUrl" class="card-img-top" alt="{{ movie.title }}">
            <div class="card-body">
              <h5 class="card-title">{{ movie.title }}</h5>
              <p class="card-text"><strong>üé≠ –ñ–∞–Ω—Ä—ã:</strong> {{ movie.genres.join(', ') }}</p>
              <p class="card-text"><strong>üåç –Ø–∑—ã–∫:</strong> {{ movie.language }}</p>
              <p class="card-text"><strong>üìÖ –ì–æ–¥:</strong> {{ movie.releaseYear }}</p>
              <p class="card-text"><strong>‚è≥ –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</strong> {{ movie.duration }} –º–∏–Ω</p>
              <a [routerLink]="['/user/movies', movie.id]" class="btn btn-primary w-100">‚ÑπÔ∏è –ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
            </div>
          </div>
        </div>
      </div>

      <nav *ngIf="totalPages > 1" class="mt-4">
        <ul class="pagination justify-content-center shadow-sm">
          <li class="page-item" [class.disabled]="currentPage === 1">
            <button class="page-link" (click)="goToPage(currentPage - 1)">¬´</button>
          </li>
          <li *ngFor="let i of [].constructor(totalPages); let index = index" class="page-item"
              [class.active]="index + 1 === currentPage">
            <button class="page-link" (click)="goToPage(index + 1)">{{ index + 1 }}</button>
          </li>
          <li class="page-item" [class.disabled]="currentPage === totalPages">
            <button class="page-link" (click)="goToPage(currentPage + 1)">¬ª</button>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>